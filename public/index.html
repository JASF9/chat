<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Sign In</title>
</head>
<body>
<h1>Sign In</h1>
<section>
  <div>
    <label for='mail'>Email</label><br>
    <input type='email' id='mail' name='mail'/>
  </div>
  <div>
    <label for='password'>Password</label><br>
    <input type="password" id="password" name="password"/><br>
  </div>
  <button id="signIn">Sign In</button>
  <a href="register.html"><button id="register">Register</button></a>
</section>
<div id="mistakes"></div>

<script src="https://www.gstatic.com/firebasejs/7.18.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.18.0/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.18.0/firebase-database.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.18.0/firebase-firestore.js"></script> 
<script type="module">
import {auth,db} from "./firebase.js"

var emailField = document.getElementById('mail');
var passwordField = document.getElementById('password');
var mistakes = document.getElementById('mistakes');
var signIn = document.getElementById('signIn');


auth.onAuthStateChanged(function(user) {
  if (user) {
    // User is signed in.
  } else {
    // No user is signed in.
  }
});

 function signInFunction() {
  let email = document.querySelector("#mail").value;
  let password = document.querySelector("#password").value;

  auth.signInWithEmailAndPassword(email,password)
  .then(()=>{
    console.log('You have Signed In');
    window.location.href = "userpage.html";
  })
  .catch(error =>{
    console.error(error);
    if(email!="" && password!="")
    mistakes.innerHTML = error;
  });
}
document.querySelector('#signIn').addEventListener('click', signInFunction())

</script>


<script>

</script>
</body>
</html> 

